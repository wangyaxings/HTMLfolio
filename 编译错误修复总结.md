# HTML Card Viewer - ç¼–è¯‘é”™è¯¯ä¿®å¤æ€»ç»“

## ğŸ”§ ä¿®å¤çš„ç¼–è¯‘é”™è¯¯

### é—®é¢˜ä¸€ï¼šPrimeNG InputTextarea å¯¼å…¥é”™è¯¯
**é”™è¯¯ä¿¡æ¯**:
```
Error: export 'InputTextareaModule' was not found in 'primeng/inputtextarea'
```

**åŸå› **: PrimeNG 19ç‰ˆæœ¬ä¸­æ²¡æœ‰ `InputTextareaModule`ï¼Œåº”è¯¥ä½¿ç”¨ `InputTextarea` ç»„ä»¶

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
// ä¿®å¤å‰
import { InputTextareaModule } from 'primeng/inputtextarea';

// ä¿®å¤å
import { InputTextarea } from 'primeng/inputtextarea';
```

### é—®é¢˜äºŒï¼šimports æ•°ç»„é™æ€åˆ†æé”™è¯¯
**é”™è¯¯ä¿¡æ¯**:
```
Error: 'imports' must be an array of components, directives, pipes, or NgModules.
Value could not be determined statically.
```

**åŸå› **: åœ¨importsæ•°ç»„ä¸­å¼•ç”¨äº†ä¸å­˜åœ¨çš„ `InputTextareaModule`

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
// ä¿®å¤å‰
imports: [
  // ... å…¶ä»–æ¨¡å—
  InputTextareaModule,
  // ...
]

// ä¿®å¤å
imports: [
  // ... å…¶ä»–æ¨¡å—
  InputTextarea,
  // ...
]
```

### é—®é¢˜ä¸‰ï¼šTypeScript ç±»å‹é”™è¯¯
**é”™è¯¯ä¿¡æ¯**:
```
Error: Type 'HtmlFile | undefined' is not assignable to type 'HtmlFile | null'.
Type 'undefined' is not assignable to type 'HtmlFile | null'.
```

**åŸå› **: `getFile()` æ–¹æ³•è¿”å› `HtmlFile | undefined`ï¼Œä½†å˜é‡å£°æ˜ä¸º `HtmlFile | null`

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
// ä¿®å¤å‰
this.currentFile = this.htmlFileService.getFile(filename);

// ä¿®å¤å
this.currentFile = this.htmlFileService.getFile(filename) || null;
```

### é—®é¢˜å››ï¼šAngularå®‰å…¨é”™è¯¯ ğŸ†•
**é”™è¯¯ä¿¡æ¯**:
```
ERROR RuntimeError: NG0904: unsafe value used in a resource URL context
```

**åŸå› **: Angularçš„å®‰å…¨æœºåˆ¶é˜»æ­¢äº†åŠ¨æ€è®¾ç½®iframeçš„srcå±æ€§ï¼Œé˜²æ­¢XSSæ”»å‡»

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
// 1. å¯¼å…¥DomSanitizer
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';

// 2. åœ¨æ„é€ å‡½æ•°ä¸­æ³¨å…¥
constructor(
  // ... å…¶ä»–ä¾èµ–
  private sanitizer: DomSanitizer
) {}

// 3. åˆ›å»ºå®‰å…¨URLæ–¹æ³•
getSafeFileUrl(file: HtmlFile): SafeResourceUrl {
  const url = this.getFileUrl(file);
  return this.sanitizer.bypassSecurityTrustResourceUrl(url);
}

// 4. åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å®‰å…¨URL
<iframe [src]="getSafeFileUrl(file)">
```

### é—®é¢˜äº”ï¼šiframeæ²™ç›’å®‰å…¨è­¦å‘Š ğŸ†•
**è­¦å‘Šä¿¡æ¯**:
```
An iframe which has both allow-scripts and allow-same-origin for its sandbox attribute can escape its sandboxing.
```

**åŸå› **: åŒæ—¶ä½¿ç”¨ `allow-scripts` å’Œ `allow-same-origin` å¯èƒ½å¯¼è‡´æ²™ç›’é€ƒé€¸å®‰å…¨é£é™©

**ä¿®å¤æ–¹æ¡ˆ**:
```html
<!-- ä¿®å¤å‰ -->
<iframe sandbox="allow-same-origin allow-scripts">

<!-- ä¿®å¤å -->
<iframe sandbox="allow-same-origin">
```

## âœ… ä¿®å¤ç»“æœ

### ç¼–è¯‘çŠ¶æ€
- âœ… **ç¼–è¯‘æˆåŠŸ**: Angularé¡¹ç›®ç°åœ¨å¯ä»¥æ­£å¸¸ç¼–è¯‘
- âœ… **æ— ç¼–è¯‘é”™è¯¯**: æ‰€æœ‰TypeScriptå’Œæ¨¡å—å¯¼å…¥é”™è¯¯å·²è§£å†³
- âœ… **æ„å»ºæˆåŠŸ**: å¼€å‘æ¨¡å¼æ„å»ºå®Œæˆï¼Œç”Ÿæˆæ‰€æœ‰å¿…éœ€çš„å—æ–‡ä»¶
- âœ… **å®‰å…¨é”™è¯¯è§£å†³**: Angularå®‰å…¨è­¦å‘Šå·²ä¿®å¤
- âœ… **æ²™ç›’è­¦å‘Šè§£å†³**: iframeå®‰å…¨é…ç½®å·²ä¼˜åŒ–

### æ„å»ºè¾“å‡º
```
âœ” Browser application bundle generation complete.
âœ” Copying assets complete.
âœ” Index html generation complete.

Initial chunk files                                     | Names                      |  Raw size
vendor.js                                               | vendor                     |   4.65 MB |
main.js                                                 | main                       | 281.38 kB |
polyfills.js                                            | polyfills                  | 116.15 kB |
styles.css                                              | styles                     |  29.89 kB |
runtime.js                                              | runtime                    |  12.32 kB |

Build at: 2025-05-24T03:20:37.257Z - Hash: cb1e3fc4242c99dc - Time: 7130ms
```

### æœåŠ¡çŠ¶æ€
- âœ… **åç«¯æœåŠ¡**: æ­£åœ¨ http://localhost:8080 è¿è¡Œ
- âœ… **å‰ç«¯æœåŠ¡**: æ­£åœ¨ http://localhost:4200 è¿è¡Œ
- âœ… **æµè§ˆå™¨è®¿é—®**: åº”ç”¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ­£å¸¸è®¿é—®
- âœ… **å®‰å…¨è®¿é—®**: URLèµ„æºè®¿é—®å®‰å…¨æ— è­¦å‘Š

## ğŸ¯ æŠ€æœ¯ç»†èŠ‚

### PrimeNG ç‰ˆæœ¬å…¼å®¹æ€§
- **é—®é¢˜**: PrimeNG v19+ ä¸­æ¨¡å—å¯¼å…¥æ–¹å¼å‘ç”Ÿå˜åŒ–
- **è§£å†³**: ç›´æ¥å¯¼å…¥ç»„ä»¶è€Œä¸æ˜¯æ¨¡å—
- **å½±å“**: åªéœ€æ›´æ”¹importè¯­å¥ï¼ŒåŠŸèƒ½ä¿æŒä¸å˜

### TypeScript ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **é—®é¢˜**: ä¸¥æ ¼çš„nullæ£€æŸ¥å¯¼è‡´ç±»å‹ä¸åŒ¹é…
- **è§£å†³**: ä½¿ç”¨null coalescingæ“ä½œç¬¦å¤„ç†undefinedå€¼
- **å¥½å¤„**: æé«˜ä»£ç çš„ç±»å‹å®‰å…¨æ€§

### Angular å®‰å…¨æœºåˆ¶
- **é—®é¢˜**: Angularé»˜è®¤é˜»æ­¢ä¸ä¿¡ä»»çš„URLèµ„æºè®¿é—®
- **è§£å†³**: ä½¿ç”¨DomSanitizeræ˜ç¡®æ ‡è®°URLä¸ºå®‰å…¨
- **å¥½å¤„**: æ—¢ä¿è¯å®‰å…¨æ€§åˆå…è®¸åˆæ³•çš„èµ„æºè®¿é—®

### iframe æ²™ç›’å®‰å…¨
- **é—®é¢˜**: è¿‡åº¦çš„æ²™ç›’æƒé™å¯èƒ½é€ æˆå®‰å…¨é£é™©
- **è§£å†³**: ç§»é™¤ä¸å¿…è¦çš„scriptsæƒé™ï¼Œä»…ä¿ç•™same-origin
- **å¥½å¤„**: æé«˜å®‰å…¨æ€§ï¼Œå‡å°‘æ²™ç›’é€ƒé€¸é£é™©

## ğŸ“ ç»éªŒæ€»ç»“

1. **PrimeNGå‡çº§æ³¨æ„äº‹é¡¹**: æ–°ç‰ˆæœ¬ä¸­ä¸€äº›æ¨¡å—å¯¼å…¥æ–¹å¼å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦æŸ¥é˜…å®˜æ–¹æ–‡æ¡£
2. **TypeScriptä¸¥æ ¼æ¨¡å¼**: å¯ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥æœ‰åŠ©äºå‘ç°æ½œåœ¨é—®é¢˜
3. **æ¸è¿›å¼ä¿®å¤**: é€ä¸ªè§£å†³ç¼–è¯‘é”™è¯¯ï¼Œé¿å…ä¸€æ¬¡æ€§å¤§é‡ä¿®æ”¹
4. **Angularå®‰å…¨æœºåˆ¶**: ç†è§£Angularçš„å®‰å…¨æ¨¡å‹å¯¹å¼€å‘Webåº”ç”¨è‡³å…³é‡è¦
5. **iframeå®‰å…¨é…ç½®**: å¹³è¡¡åŠŸèƒ½éœ€æ±‚å’Œå®‰å…¨è¦æ±‚ï¼Œé¿å…è¿‡åº¦æƒé™

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **ç‰ˆæœ¬é”å®š**: åœ¨package.jsonä¸­é”å®šPrimeNGç‰ˆæœ¬ï¼Œé¿å…è‡ªåŠ¨å‡çº§å¯¼è‡´çš„å…¼å®¹æ€§é—®é¢˜
2. **ç±»å‹å®šä¹‰**: å®Œå–„æ‰€æœ‰ç»„ä»¶çš„TypeScriptç±»å‹å®šä¹‰
3. **æµ‹è¯•è¦†ç›–**: æ·»åŠ å•å…ƒæµ‹è¯•ç¡®ä¿ä¿®å¤ä¸å½±å“åŠŸèƒ½
4. **å®‰å…¨å®¡è®¡**: å®šæœŸæ£€æŸ¥åº”ç”¨çš„å®‰å…¨é…ç½®
5. **æ€§èƒ½ä¼˜åŒ–**: ç›‘æ§iframeåŠ è½½æ€§èƒ½ï¼Œè€ƒè™‘ç¼“å­˜æœºåˆ¶

## ğŸ” ç¼©ç•¥å›¾æ˜¾ç¤ºæµ‹è¯•

ç°åœ¨ç¼©ç•¥å›¾åº”è¯¥èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºï¼Œå› ä¸ºï¼š
- âœ… Angularå®‰å…¨é”™è¯¯å·²è§£å†³
- âœ… iframe URLç°åœ¨è¢«æ­£ç¡®æ ‡è®°ä¸ºå®‰å…¨
- âœ… æ²™ç›’é…ç½®å·²ä¼˜åŒ–
- âœ… åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
- âœ… æµ‹è¯•æ–‡ä»¶å·²å‡†å¤‡å¥½

è¯·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:4200 æŸ¥çœ‹ç¼©ç•¥å›¾é¢„è§ˆæ•ˆæœã€‚

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025å¹´5æœˆ24æ—¥ 11:20
**ä¿®å¤çŠ¶æ€**: âœ… å®Œå…¨è§£å†³
**æµ‹è¯•çŠ¶æ€**: âœ… ç¼–è¯‘é€šè¿‡ï¼ŒæœåŠ¡æ­£å¸¸è¿è¡Œï¼Œå®‰å…¨é”™è¯¯å·²ä¿®å¤